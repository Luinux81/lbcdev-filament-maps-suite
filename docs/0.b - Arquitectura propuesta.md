# ðŸ—ï¸ PROPUESTA DE ARQUITECTURA - PRIMER PASO

**Fecha**: 7 de febrero de 2026  
**Para**: Luinux81  
**Documento**: DecisiÃ³n arquitectÃ³nica y setup inicial

---

## ðŸŽ¯ RESUMEN EJECUTIVO

Basado en la auditorÃ­a completa, te propongo una **arquitectura hÃ­brida con Monorepo + Git Submodules** que te permitirÃ¡:

âœ… Trabajar de forma eficiente con todos los paquetes  
âœ… Mantener repos individuales para Packagist  
âœ… Facilitar el desarrollo y testing integrado  
âœ… Preservar la flexibilidad de instalaciÃ³n independiente  

---

## ðŸ›ï¸ ARQUITECTURA PROPUESTA DETALLADA

### VisiÃ³n General

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 GITHUB REPOSITORIES                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. lbcdev-filament-maps-suite (MONOREPO PRINCIPAL)         â”‚
â”‚     â”œâ”€â”€ packages/                                            â”‚
â”‚     â”‚   â”œâ”€â”€ core/          [submodule â†’ repo 2]             â”‚
â”‚     â”‚   â”œâ”€â”€ geometries/    [submodule â†’ repo 3]             â”‚
â”‚     â”‚   â”œâ”€â”€ fields/        [submodule â†’ repo 4]             â”‚
â”‚     â”‚   â””â”€â”€ widgets/       [submodule â†’ repo 5]             â”‚
â”‚     â”œâ”€â”€ docs/                                                â”‚
â”‚     â”œâ”€â”€ examples/                                            â”‚
â”‚     â””â”€â”€ tests/             [tests integrados]               â”‚
â”‚                                                              â”‚
â”‚  2. livewire-maps-core (INDEPENDIENTE)                      â”‚
â”‚     â”œâ”€â”€ src/                                                 â”‚
â”‚     â”œâ”€â”€ resources/                                           â”‚
â”‚     â””â”€â”€ tests/                                               â”‚
â”‚                                                              â”‚
â”‚  3. map-geometries (INDEPENDIENTE)                          â”‚
â”‚     â”œâ”€â”€ src/                                                 â”‚
â”‚     â””â”€â”€ tests/                                               â”‚
â”‚                                                              â”‚
â”‚  4. filament-maps-fields (INDEPENDIENTE)                    â”‚
â”‚     â”œâ”€â”€ src/                                                 â”‚
â”‚     â”œâ”€â”€ resources/                                           â”‚
â”‚     â””â”€â”€ tests/                                               â”‚
â”‚                                                              â”‚
â”‚  5. filament-maps-widgets (INDEPENDIENTE)                   â”‚
â”‚     â”œâ”€â”€ src/                                                 â”‚
â”‚     â”œâ”€â”€ resources/                                           â”‚
â”‚     â””â”€â”€ tests/                                               â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PACKAGIST PACKAGES                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  - lbcdev/filament-maps-suite         [meta-package]        â”‚
â”‚  - lbcdev/livewire-maps-core                                â”‚
â”‚  - lbcdev/map-geometries                                    â”‚
â”‚  - lbcdev/filament-maps-fields                              â”‚
â”‚  - lbcdev/filament-maps-widgets                             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ventajas de esta Arquitectura

#### âœ… Para Ti (Desarrollador)

- **Un solo workspace**: Trabajas con todos los paquetes abiertos en VS Code
- **Tests integrados**: Puedes testear interacciones entre paquetes
- **Commits atÃ³micos**: Cambios en mÃºltiples paquetes en un solo commit del monorepo
- **DocumentaciÃ³n centralizada**: Un solo sitio de docs para todo
- **DevContainer Ãºnico**: Setup de desarrollo instantÃ¡neo

#### âœ… Para Usuarios Finales

- **InstalaciÃ³n flexible**:

  ```bash
  # Instalar todo
  composer require lbcdev/filament-maps-suite
  
  # O solo lo que necesitan
  composer require lbcdev/filament-maps-fields
  ```

- **Versionado independiente**: Cada paquete tiene su propio changelog
- **Actualizaciones granulares**: Pueden actualizar solo un paquete si quieren

#### âœ… Para Packagist

- **5 paquetes independientes**: Cada uno con su propio repo y tags
- **BÃºsqueda orgÃ¡nica**: Usuarios pueden encontrar los paquetes por separado
- **Meta-package**: InstalaciÃ³n conveniente del suite completo

---

## ðŸ“ ESTRUCTURA DE DIRECTORIOS DETALLADA

### Repo Principal: lbcdev-filament-maps-suite

```
lbcdev-filament-maps-suite/
â”‚
â”œâ”€â”€ .devcontainer/
â”‚   â”œâ”€â”€ devcontainer.json          # ConfiguraciÃ³n VS Code Dev Container
â”‚   â”œâ”€â”€ docker-compose.yml         # Servicios: PHP, PostgreSQL, Redis
â”‚   â””â”€â”€ Dockerfile                 # Imagen custom si es necesario
â”‚
â”œâ”€â”€ .github/
â”‚   â”œâ”€â”€ workflows/
â”‚   â”‚   â”œâ”€â”€ test-core.yml          # CI para el paquete core
â”‚   â”‚   â”œâ”€â”€ test-geometries.yml    # CI para geometries
â”‚   â”‚   â”œâ”€â”€ test-fields.yml        # CI para fields
â”‚   â”‚   â”œâ”€â”€ test-widgets.yml       # CI para widgets
â”‚   â”‚   â”œâ”€â”€ test-integration.yml   # Tests entre todos los paquetes
â”‚   â”‚   â””â”€â”€ release.yml            # Automatizar releases
â”‚   â””â”€â”€ ISSUE_TEMPLATE/
â”‚       â”œâ”€â”€ bug_report.md
â”‚       â””â”€â”€ feature_request.md
â”‚
â”œâ”€â”€ .vscode/
â”‚   â”œâ”€â”€ settings.json              # Settings compartidos
â”‚   â”œâ”€â”€ extensions.json            # Extensiones recomendadas
â”‚   â””â”€â”€ launch.json                # Debug config
â”‚
â”œâ”€â”€ packages/                      # â† GIT SUBMODULES
â”‚   â”œâ”€â”€ core/                      # â†’ github.com/Luinux81/livewire-maps-core
â”‚   â”œâ”€â”€ geometries/                # â†’ github.com/Luinux81/map-geometries
â”‚   â”œâ”€â”€ fields/                    # â†’ github.com/Luinux81/filament-maps-fields
â”‚   â””â”€â”€ widgets/                   # â†’ github.com/Luinux81/filament-maps-widgets
â”‚
â”œâ”€â”€ docs/                          # DocumentaciÃ³n unificada (VitePress)
â”‚   â”œâ”€â”€ .vitepress/
â”‚   â”‚   â””â”€â”€ config.js
â”‚   â”œâ”€â”€ index.md                   # Home
â”‚   â”œâ”€â”€ getting-started/
â”‚   â”‚   â”œâ”€â”€ installation.md
â”‚   â”‚   â”œâ”€â”€ quickstart.md
â”‚   â”‚   â””â”€â”€ configuration.md
â”‚   â”œâ”€â”€ core-concepts/
â”‚   â”‚   â”œâ”€â”€ architecture.md
â”‚   â”‚   â”œâ”€â”€ livewire-component.md
â”‚   â”‚   â””â”€â”€ geometries.md
â”‚   â”œâ”€â”€ fields/
â”‚   â”‚   â”œâ”€â”€ map-field.md
â”‚   â”‚   â”œâ”€â”€ bounds-field.md
â”‚   â”‚   â””â”€â”€ multi-marker-field.md
â”‚   â”œâ”€â”€ widgets/
â”‚   â”‚   â”œâ”€â”€ map-widget.md
â”‚   â”‚   â””â”€â”€ clustering.md
â”‚   â”œâ”€â”€ advanced/
â”‚   â”‚   â”œâ”€â”€ actions.md
â”‚   â”‚   â”œâ”€â”€ custom-tiles.md
â”‚   â”‚   â””â”€â”€ geocoding.md
â”‚   â””â”€â”€ api/                       # API reference generada
â”‚
â”œâ”€â”€ examples/                      # Proyectos Laravel de ejemplo
â”‚   â”œâ”€â”€ basic-usage/
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ composer.json
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”œâ”€â”€ advanced-features/
â”‚   â””â”€â”€ real-world-app/
â”‚
â”œâ”€â”€ tests/                         # Tests de integraciÃ³n entre paquetes
â”‚   â”œâ”€â”€ Integration/
â”‚   â”‚   â”œâ”€â”€ CoreAndFieldsTest.php
â”‚   â”‚   â”œâ”€â”€ AllPackagesTest.php
â”‚   â”‚   â””â”€â”€ FilamentIntegrationTest.php
â”‚   â””â”€â”€ TestCase.php
â”‚
â”œâ”€â”€ .editorconfig
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .gitmodules                    # ConfiguraciÃ³n de submodules
â”œâ”€â”€ ARCHITECTURE.md                # Este documento
â”œâ”€â”€ CHANGELOG.md                   # Changelog del suite completo
â”œâ”€â”€ CODE_OF_CONDUCT.md
â”œâ”€â”€ CONTRIBUTING.md                # GuÃ­a de contribuciÃ³n
â”œâ”€â”€ LICENSE                        # MIT
â”œâ”€â”€ README.md                      # README principal del suite
â”œâ”€â”€ composer.json                  # Meta-package
â””â”€â”€ lbcdev-maps-suite.code-workspace  # VS Code Workspace
```

### Submodule Ejemplo: livewire-maps-core

```
livewire-maps-core/                # Repo independiente en GitHub
â”‚
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ tests.yml
â”‚
â”œâ”€â”€ resources/
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â””â”€â”€ livewire/
â”‚   â”‚       â”œâ”€â”€ map.blade.php
â”‚   â”‚       â””â”€â”€ map-multi-marker.blade.php
â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ map-core.js
â”‚       â””â”€â”€ marker-manager.js
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Components/
â”‚   â”‚   â”œâ”€â”€ LivewireMap.php
â”‚   â”‚   â””â”€â”€ LivewireMultiMarkerMap.php
â”‚   â”œâ”€â”€ Concerns/
â”‚   â”‚   â”œâ”€â”€ HasMarkers.php
â”‚   â”‚   â”œâ”€â”€ HasEvents.php
â”‚   â”‚   â””â”€â”€ HasTileProviders.php
â”‚   â”œâ”€â”€ Contracts/
â”‚   â”‚   â””â”€â”€ MapComponentInterface.php
â”‚   â”œâ”€â”€ Facades/
â”‚   â”‚   â””â”€â”€ LivewireMap.php
â”‚   â”œâ”€â”€ LivewireMapsServiceProvider.php
â”‚   â””â”€â”€ helpers.php
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ Unit/
â”‚   â”‚   â”œâ”€â”€ ComponentTest.php
â”‚   â”‚   â””â”€â”€ MarkerManagerTest.php
â”‚   â”œâ”€â”€ Feature/
â”‚   â”‚   â””â”€â”€ LivewireIntegrationTest.php
â”‚   â””â”€â”€ TestCase.php
â”‚
â”œâ”€â”€ .editorconfig
â”œâ”€â”€ .gitignore
â”œâ”€â”€ CHANGELOG.md
â”œâ”€â”€ LICENSE
â”œâ”€â”€ README.md
â”œâ”€â”€ composer.json
â””â”€â”€ phpunit.xml
```

---

## ðŸ› ï¸ CONFIGURACIONES TÃ‰CNICAS

### 1. composer.json del Monorepo (Meta-package)

**lbcdev-filament-maps-suite/composer.json**:

```json
{
    "name": "lbcdev/filament-maps-suite",
    "description": "Complete maps solution for FilamentPHP - Fields, Widgets, and more",
    "keywords": [
        "laravel",
        "livewire",
        "filament",
        "maps",
        "leaflet",
        "filamentphp"
    ],
    "type": "library",
    "license": "MIT",
    "authors": [
        {
            "name": "Luinux81",
            "email": "tu-email@example.com"
        }
    ],
    "require": {
        "php": "^8.1",
        "lbcdev/livewire-maps-core": "^2.0",
        "lbcdev/map-geometries": "^1.0",
        "lbcdev/filament-maps-fields": "^2.0",
        "lbcdev/filament-maps-widgets": "^1.0"
    },
    "require-dev": {
        "orchestra/testbench": "^8.0|^9.0",
        "pestphp/pest": "^2.0",
        "phpunit/phpunit": "^10.0"
    },
    "autoload": {
        "psr-4": {
            "Lbcdev\\FilamentMapsSuite\\": "src/"
        }
    },
    "autoload-dev": {
        "psr-4": {
            "Lbcdev\\FilamentMapsSuite\\Tests\\": "tests/"
        }
    },
    "extra": {
        "laravel": {
            "providers": [
                "Lbcdev\\LivewireMaps\\LivewireMapsServiceProvider",
                "Lbcdev\\MapGeometries\\MapGeometriesServiceProvider",
                "Lbcdev\\FilamentMapsFields\\FilamentMapsFieldsServiceProvider",
                "Lbcdev\\FilamentMapsWidgets\\FilamentMapsWidgetsServiceProvider"
            ]
        }
    },
    "minimum-stability": "dev",
    "prefer-stable": true
}
```

### 2. .gitmodules (Git Submodules Config)

**lbcdev-filament-maps-suite/.gitmodules**:

```ini
[submodule "packages/core"]
    path = packages/core
    url = https://github.com/Luinux81/livewire-maps-core.git
    branch = main

[submodule "packages/geometries"]
    path = packages/geometries
    url = https://github.com/Luinux81/map-geometries.git
    branch = main

[submodule "packages/fields"]
    path = packages/fields
    url = https://github.com/Luinux81/filament-maps-fields.git
    branch = main

[submodule "packages/widgets"]
    path = packages/widgets
    url = https://github.com/Luinux81/filament-maps-widgets.git
    branch = main
```

### 3. VS Code Workspace

**lbcdev-maps-suite.code-workspace**:

```json
{
  "folders": [
    {
      "name": "ðŸ—ï¸ SUITE (Principal)",
      "path": "."
    },
    {
      "name": "ðŸ“¦ Core",
      "path": "packages/core"
    },
    {
      "name": "ðŸ—ºï¸ Geometries",
      "path": "packages/geometries"
    },
    {
      "name": "ðŸ“ Fields",
      "path": "packages/fields"
    },
    {
      "name": "ðŸ“Š Widgets",
      "path": "packages/widgets"
    }
  ],
  "settings": {
    "files.exclude": {
      "**/vendor": true,
      "**/node_modules": true,
      "**/.git": false
    },
    "search.exclude": {
      "**/vendor": true,
      "**/node_modules": true
    },
    "phpunit.paths": {
      "${workspaceFolder:Core}/vendor/bin/phpunit": "packages/core",
      "${workspaceFolder:Geometries}/vendor/bin/phpunit": "packages/geometries",
      "${workspaceFolder:Fields}/vendor/bin/phpunit": "packages/fields",
      "${workspaceFolder:Widgets}/vendor/bin/phpunit": "packages/widgets"
    },
    "intelephense.environment.includePaths": [
      "packages/core/src",
      "packages/geometries/src",
      "packages/fields/src",
      "packages/widgets/src"
    ],
    "[php]": {
      "editor.formatOnSave": true,
      "editor.defaultFormatter": "bmewburn.vscode-intelephense-client"
    }
  },
  "extensions": {
    "recommendations": [
      "bmewburn.vscode-intelephense-client",
      "mrmlnc.vscode-blade",
      "onecentlin.laravel-blade",
      "amiralizadeh9480.laravel-extra-intellisense",
      "ms-azuretools.vscode-docker",
      "ms-vscode-remote.remote-containers",
      "eamodio.gitlens",
      "editorconfig.editorconfig"
    ]
  },
  "launch": {
    "version": "0.2.0",
    "configurations": [
      {
        "name": "Listen for Xdebug (Core)",
        "type": "php",
        "request": "launch",
        "port": 9003,
        "pathMappings": {
          "/workspace/packages/core": "${workspaceFolder:Core}"
        }
      },
      {
        "name": "Listen for Xdebug (Fields)",
        "type": "php",
        "request": "launch",
        "port": 9003,
        "pathMappings": {
          "/workspace/packages/fields": "${workspaceFolder:Fields}"
        }
      }
    ]
  }
}
```

### 4. DevContainer Configuration

**.devcontainer/devcontainer.json**:

```json
{
  "name": "LBCDev Maps Suite Development",
  "dockerComposeFile": "docker-compose.yml",
  "service": "workspace",
  "workspaceFolder": "/workspace",
  
  "customizations": {
    "vscode": {
      "extensions": [
        "bmewburn.vscode-intelephense-client",
        "mrmlnc.vscode-blade",
        "onecentlin.laravel-blade",
        "amiralizadeh9480.laravel-extra-intellisense",
        "eamodio.gitlens",
        "ms-azuretools.vscode-docker",
        "editorconfig.editorconfig",
        "xdebug.php-debug"
      ],
      "settings": {
        "php.validate.executablePath": "/usr/local/bin/php",
        "php.suggest.basic": false,
        "intelephense.environment.phpVersion": "8.2.0",
        "intelephense.files.maxSize": 5000000,
        "[php]": {
          "editor.defaultFormatter": "bmewburn.vscode-intelephense-client",
          "editor.formatOnSave": true
        }
      }
    }
  },
  
  "forwardPorts": [8000, 5432, 6379, 8080],
  "portsAttributes": {
    "8000": {
      "label": "Laravel App",
      "onAutoForward": "notify"
    },
    "8080": {
      "label": "Docs (VitePress)",
      "onAutoForward": "openBrowser"
    }
  },
  
  "postCreateCommand": "bash .devcontainer/post-create.sh",
  "postStartCommand": "bash .devcontainer/post-start.sh",
  
  "remoteUser": "vscode",
  
  "features": {
    "ghcr.io/devcontainers/features/git:1": {},
    "ghcr.io/devcontainers/features/github-cli:1": {}
  }
}
```

**.devcontainer/docker-compose.yml**:

```yaml
version: '3.8'

services:
  workspace:
    build:
      context: .
      dockerfile: Dockerfile
    
    volumes:
      - ..:/workspace:cached
      - ~/.ssh:/home/vscode/.ssh:ro  # Para Git con SSH
    
    command: sleep infinity
    
    environment:
      - DB_CONNECTION=pgsql
      - DB_HOST=postgres
      - DB_PORT=5432
      - DB_DATABASE=lbcdev_maps
      - DB_USERNAME=lbcdev
      - DB_PASSWORD=secret
      - REDIS_HOST=redis
      - REDIS_PORT=6379
    
    networks:
      - lbcdev-maps
    
    depends_on:
      - postgres
      - redis

  postgres:
    image: postgres:15-alpine
    restart: unless-stopped
    
    environment:
      POSTGRES_DB: lbcdev_maps
      POSTGRES_USER: lbcdev
      POSTGRES_PASSWORD: secret
    
    volumes:
      - postgres-data:/var/lib/postgresql/data
    
    networks:
      - lbcdev-maps
    
    ports:
      - "5432:5432"

  redis:
    image: redis:7-alpine
    restart: unless-stopped
    
    volumes:
      - redis-data:/data
    
    networks:
      - lbcdev-maps
    
    ports:
      - "6379:6379"

  docs:
    image: node:18-alpine
    working_dir: /docs
    
    volumes:
      - ../docs:/docs:cached
    
    command: sh -c "npm install && npm run dev -- --host 0.0.0.0"
    
    networks:
      - lbcdev-maps
    
    ports:
      - "8080:8080"

volumes:
  postgres-data:
  redis-data:

networks:
  lbcdev-maps:
    driver: bridge
```

**.devcontainer/Dockerfile**:

```dockerfile
FROM mcr.microsoft.com/devcontainers/php:1-8.2

# Instalar extensiones PHP
RUN install-php-extensions \
    pdo_pgsql \
    pgsql \
    redis \
    xdebug \
    zip \
    gd \
    intl \
    bcmath

# Instalar Composer
COPY --from=composer:latest /usr/bin/composer /usr/bin/composer

# Instalar Node.js y NPM
RUN curl -fsSL https://deb.nodesource.com/setup_18.x | bash - \
    && apt-get install -y nodejs

# Configurar Xdebug
RUN echo "xdebug.mode=debug" >> /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini \
    && echo "xdebug.start_with_request=yes" >> /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini \
    && echo "xdebug.client_host=host.docker.internal" >> /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini

# Crear usuario no-root
ARG USERNAME=vscode
ARG USER_UID=1000
ARG USER_GID=$USER_UID

RUN groupadd --gid $USER_GID $USERNAME \
    && useradd --uid $USER_UID --gid $USER_GID -m $USERNAME \
    && apt-get update \
    && apt-get install -y sudo \
    && echo $USERNAME ALL=\(root\) NOPASSWD:ALL > /etc/sudoers.d/$USERNAME \
    && chmod 0440 /etc/sudoers.d/$USERNAME

USER $USERNAME
```

**.devcontainer/post-create.sh**:

```bash
#!/bin/bash

echo "ðŸš€ Inicializando workspace..."

# Inicializar submodules
echo "ðŸ“¦ Inicializando git submodules..."
git submodule update --init --recursive

# Instalar dependencias del monorepo
echo "ðŸ“š Instalando dependencias de composer (monorepo)..."
composer install

# Instalar dependencias de cada paquete
for pkg in packages/*/; do
    if [ -f "$pkg/composer.json" ]; then
        echo "ðŸ“¦ Instalando dependencias de $pkg..."
        (cd "$pkg" && composer install)
    fi
done

# Instalar dependencias de docs
if [ -f "docs/package.json" ]; then
    echo "ðŸ“– Instalando dependencias de documentaciÃ³n..."
    (cd docs && npm install)
fi

# Configurar Git
echo "ðŸ”§ Configurando Git..."
git config --global --add safe.directory /workspace
git config --global --add safe.directory '/workspace/*'

echo "âœ… Â¡Workspace listo!"
```

**.devcontainer/post-start.sh**:

```bash
#!/bin/bash

echo "ðŸ”„ Post-start commands..."

# Actualizar submodules (por si hay cambios remotos)
git submodule update --remote --merge

echo "âœ… Container iniciado correctamente"
```

---

## ðŸš€ PASOS DE IMPLEMENTACIÃ“N

### Semana 1: Setup Inicial (5-7 dÃ­as)

#### DÃ­a 1: PreparaciÃ³n

**MaÃ±ana**:

1. âœ… Leer completamente esta propuesta
2. âœ… Decidir nombres finales de repos
3. âœ… Crear checklist detallada en GitHub Issues

**Tarde**:
4. âœ… Hacer backup de tus repos actuales
5. âœ… Crear branch `migration-to-suite` en repos existentes
6. âœ… Planificar migraciÃ³n de datos/issues

#### DÃ­a 2: Crear Estructura de Repos

**Repos a Crear en GitHub**:

```bash
# 1. Repo principal (nuevo)
gh repo create Luinux81/lbcdev-filament-maps-suite \
    --public \
    --description "Complete maps solution for FilamentPHP" \
    --license MIT

# 2. Renombrar repo existente
# GitHub UI: Settings â†’ General â†’ Repository name
# livewire-lbcdev-component-map â†’ livewire-maps-core

# 3. Crear nuevo repo para geometries
gh repo create Luinux81/map-geometries \
    --public \
    --description "Geometry classes for maps: Markers, Polylines, Polygons" \
    --license MIT

# 4. Mantener repo existente
# filament-lbcdev-map-field â†’ OK (o renombrar a filament-maps-fields)

# 5. Crear nuevo repo para widgets
gh repo create Luinux81/filament-maps-widgets \
    --public \
    --description "Map widgets for Filament dashboards" \
    --license MIT
```

#### DÃ­a 3: Setup del Monorepo

```bash
# Clonar el repo principal reciÃ©n creado
git clone git@github.com:Luinux81/lbcdev-filament-maps-suite.git
cd lbcdev-filament-maps-suite

# Crear estructura de carpetas
mkdir -p .devcontainer .github/workflows .vscode docs examples tests packages

# AÃ±adir submodules
git submodule add git@github.com:Luinux81/livewire-maps-core.git packages/core
git submodule add git@github.com:Luinux81/map-geometries.git packages/geometries
git submodule add git@github.com:Luinux81/filament-maps-fields.git packages/fields
git submodule add git@github.com:Luinux81/filament-maps-widgets.git packages/widgets

# Commit
git commit -m "chore: Add submodules"
git push origin main
```

#### DÃ­a 4: Configurar DevContainer

1. Copiar configuraciones de arriba:
   - `.devcontainer/devcontainer.json`
   - `.devcontainer/docker-compose.yml`
   - `.devcontainer/Dockerfile`
   - Scripts post-create y post-start

2. Hacer ejecutables los scripts:

   ```bash
   chmod +x .devcontainer/*.sh
   ```

3. Testear DevContainer:
   - Abrir VS Code
   - Command Palette: "Dev Containers: Reopen in Container"
   - Esperar a que construya (5-10 min primera vez)

#### DÃ­a 5: Migrar CÃ³digo del Core

**En `packages/core/`** (antes livewire-lbcdev-component-map):

```bash
cd packages/core

# 1. Actualizar namespace
# Buscar y reemplazar en todos los archivos PHP:
# Lbcdev\LbcdevMapComponent â†’ Lbcdev\LivewireMaps

# 2. Renombrar clases principales
mv src/LbcdevMapComponent.php src/Components/LivewireMap.php
mv src/LbcdevMapServiceProvider.php src/LivewireMapsServiceProvider.php

# 3. Actualizar composer.json
# "name": "lbcdev/livewire-maps-core"
# "autoload": { "psr-4": { "Lbcdev\\LivewireMaps\\": "src/" } }

# 4. Crear branch para desarrollo
git checkout -b refactor/v2.0
git add .
git commit -m "refactor: Rename to livewire-maps-core v2.0"
git push origin refactor/v2.0
```

#### DÃ­a 6: Crear Paquete de GeometrÃ­as

**En `packages/geometries/`** (nuevo):

```bash
cd packages/geometries

# Crear estructura bÃ¡sica
mkdir -p src/{Marker,Polyline,Polygon,Circle,Rectangle,Contracts}
mkdir -p tests/Unit

# Crear composer.json
cat > composer.json << 'EOF'
{
    "name": "lbcdev/map-geometries",
    "description": "Geometry classes for maps",
    "type": "library",
    "license": "MIT",
    "autoload": {
        "psr-4": {
            "Lbcdev\\MapGeometries\\": "src/"
        }
    },
    "autoload-dev": {
        "psr-4": {
            "Lbcdev\\MapGeometries\\Tests\\": "tests/"
        }
    },
    "require": {
        "php": "^8.1"
    },
    "require-dev": {
        "phpunit/phpunit": "^10.0"
    }
}
EOF

# Extraer clases de geometrÃ­a existentes de webbingbrasil
# (copiar y adaptar Marker, Polyline, etc.)

# Commit inicial
git add .
git commit -m "feat: Initial geometry classes"
git push origin main
```

#### DÃ­a 7: VS Code Workspace y Testing

1. Crear `lbcdev-maps-suite.code-workspace` (configuraciÃ³n de arriba)

2. Cerrar VS Code

3. Abrir con workspace:

   ```bash
   code lbcdev-maps-suite.code-workspace
   ```

4. Reabrir en DevContainer

5. Verificar que todos los paquetes se ven en el explorer

6. Ejecutar tests:

   ```bash
   # En cada paquete
   cd packages/core && composer test
   cd ../geometries && composer test
   # etc.
   ```

---

## ðŸ“‹ CHECKLIST DE MIGRACIÃ“N

### Setup Infraestructura âœ…

- [X] Crear repo principal `lbcdev-filament-maps-suite`
- [X] Renombrar `livewire-lbcdev-component-map` â†’ `livewire-maps-core`
- [X] Crear repo `map-geometries`
- [ ] Renombrar (opcional) `filament-lbcdev-map-field` â†’ `filament-maps-fields`
- [X] Crear repo `filament-maps-widgets`
- [X] Configurar Git submodules
- [ ] Crear DevContainer
- [ ] Crear VS Code Workspace
- [ ] Configurar CI/CD bÃ¡sico

### MigraciÃ³n de CÃ³digo âœ…

#### Core (packages/core)

- [ ] Actualizar namespaces
- [ ] Renombrar clases principales
- [ ] Refactorizar para multi-marker
- [ ] Actualizar tests
- [ ] Actualizar README
- [ ] Tag `v2.0.0-beta.1`

#### GeometrÃ­as (packages/geometries)

- [ ] Crear interfaces base
- [ ] Implementar clase `Marker`
- [ ] Implementar clase `Polyline`
- [ ] Implementar clase `Polygon`
- [ ] Implementar clase `Circle`
- [ ] Implementar clase `Rectangle`
- [ ] Tests unitarios para cada geometrÃ­a
- [ ] Documentar API
- [ ] Tag `v1.0.0-beta.1`

#### Fields (packages/fields)

- [ ] Actualizar dependencia a core v2.0
- [ ] Actualizar dependencia a geometries v1.0
- [ ] Refactorizar MapField con nuevas geometrÃ­as
- [ ] Implementar MapMultiMarkerField
- [ ] Actualizar tests
- [ ] Tag `v2.0.0-beta.1`

#### Widgets (packages/widgets)

- [ ] Crear widget base
- [ ] Implementar MapWidget
- [ ] Integrar clustering
- [ ] Sistema de acciones
- [ ] Tests
- [ ] Tag `v1.0.0-beta.1`

### DocumentaciÃ³n âœ…

- [ ] Setup VitePress en `/docs`
- [ ] Escribir Getting Started
- [ ] Documentar cada componente
- [ ] Crear ejemplos prÃ¡cticos
- [ ] Generar API reference
- [ ] Deploy docs (GitHub Pages o Netlify)

### Testing âœ…

- [ ] Tests unitarios (80%+ coverage)
- [ ] Tests de integraciÃ³n
- [ ] Tests E2E con Dusk (opcional)
- [ ] CI passing en todos los repos

### Release âœ…

- [ ] Crear CHANGELOGs
- [ ] Tag estable en cada paquete
- [ ] Publicar en Packagist
- [ ] Anuncio en Filament Discord
- [ ] Anuncio en Twitter/LinkedIn

---

## ðŸŽ“ COMANDOS ÃšTILES

### Git Submodules

```bash
# Clonar repo con submodules
git clone --recursive https://github.com/Luinux81/lbcdev-filament-maps-suite.git

# Si ya clonaste sin --recursive
git submodule update --init --recursive

# Actualizar todos los submodules a su Ãºltima versiÃ³n
git submodule update --remote --merge

# Actualizar un submodule especÃ­fico
cd packages/core
git pull origin main
cd ../..
git add packages/core
git commit -m "chore: Update core to latest"

# Ver estado de submodules
git submodule status

# Foreach: ejecutar comando en cada submodule
git submodule foreach 'git status'
git submodule foreach 'git checkout main'
```

### Composer en Monorepo

```bash
# Instalar dependencias del monorepo
composer install

# Instalar dependencias de un paquete especÃ­fico
cd packages/core && composer install

# Instalar dependencias de todos los paquetes (script custom)
for pkg in packages/*/; do
    (cd "$pkg" && composer install)
done

# Ejecutar tests de todos los paquetes
for pkg in packages/*/; do
    echo "Testing $pkg..."
    (cd "$pkg" && composer test)
done
```

### DevContainer

```bash
# Reconstruir DevContainer (si cambias Dockerfile)
# Command Palette: "Dev Containers: Rebuild Container"

# Logs del DevContainer
# Command Palette: "Dev Containers: Show Container Log"

# Abrir terminal en el container
# Terminal â†’ New Terminal (automÃ¡tico)
```

---

## ðŸŽ¯ RESULTADO ESPERADO

DespuÃ©s de seguir este plan, tendrÃ¡s:

âœ… **5 repositorios en GitHub**:

- lbcdev-filament-maps-suite (monorepo principal)
- livewire-maps-core (componente base)
- map-geometries (clases de geometrÃ­a)
- filament-maps-fields (campos de formulario)
- filament-maps-widgets (widgets de dashboard)

âœ… **5 paquetes en Packagist**:

- Instalables independientemente
- Con versionado semÃ¡ntico
- DocumentaciÃ³n completa

âœ… **Entorno de Desarrollo Profesional**:

- DevContainer listo para usar
- VS Code Workspace configurado
- CI/CD automatizado
- Tests funcionando

âœ… **DocumentaciÃ³n de Primera Clase**:

- Sitio web con VitePress
- API reference completa
- Ejemplos prÃ¡cticos
- GuÃ­as paso a paso

âœ… **Base SÃ³lida para Crecimiento**:

- Arquitectura escalable
- FÃ¡cil de mantener
- Preparado para colaboradores

---

## ðŸ’¡ RECOMENDACIONES FINALES

### Prioridades para las Primeras 2 Semanas

1. **Setup (DÃ­a 1-7)**: Infraestructura completa funcionando
2. **Core v2.0 (DÃ­a 8-10)**: Componente base refactorizado con multi-marker
3. **Geometries v1.0 (DÃ­a 11-14)**: Paquete de geometrÃ­as funcional

### No Te Agobies

- âœ… Este es un proyecto grande, pero bien planificado
- âœ… No necesitas hacerlo todo de golpe
- âœ… Cada paso es independiente y testeable
- âœ… Puedes pedir ayuda en Filament Discord

### MantÃ©n el Enfoque

- ðŸŽ¯ Primero: infraestructura y setup
- ðŸŽ¯ Segundo: funcionalidad core
- ðŸŽ¯ Tercero: features avanzadas
- ðŸŽ¯ Cuarto: documentaciÃ³n y pulido

### Comunica Tu Progreso

- ðŸ“¢ Crea un hilo en Twitter sobre tu progreso
- ðŸ“¢ Comparte en Filament Discord
- ðŸ“¢ Pide feedback temprano
- ðŸ“¢ Celebra cada milestone

---

## ðŸ“ž PRÃ“XIMOS PASOS

1. **Lee ambos documentos** (auditorÃ­a + este)
2. **Toma una decisiÃ³n**: Â¿Seguir esta arquitectura?
3. **Si es sÃ­**: Comienza con el DÃ­a 1 del plan
4. **Si tienes dudas**: PregÃºntame lo que necesites

Â¡Estoy aquÃ­ para ayudarte en cada paso! ðŸš€
